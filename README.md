# Adola

Adola 是一个 **iOS 优先** 的 Flutter 阅读器壳应用，当前阶段目标：

- 使用 `Shadcn + Cupertino` 组合复刻主视觉与交互结构；
- 功能按 1:1 页面骨架先行；
- API / 网络 / 数据解析能力后续再接入。

## 当前完成

- iOS 端 `CupertinoTabScaffold` 五大主模块：书架、发现、搜索、书源、设置；
- 全局 `ShadApp` 主题 + `CupertinoThemeData` 适配；
- 所有页面使用本地 Mock 数据占位，保证 UI 可演示；
- 已新增 `GitHub Actions` iOS 打包流水线，自动产出未签名 IPA；
- 已打通主流程（本地数据）：搜索/发现选书 → 详情 → 加入书架 → 阅读 → 进度回写书架。

### 与 legado 对齐说明（当前已对齐的主流程语义）

- 详情页“加入书架/移出书架”是显式动作；
- “开始阅读”不再隐式加入书架（与 legado 一致）；
- 详情页支持刷新详情、刷新目录、切换书源、目录跳章；
- 阅读页支持目录弹层、上一章/下一章、章节进度回写书架、章节内搜索结果导航与自动翻页；
- 阅读器菜单体系已对齐 legado 主语义：朗读控制（开始/暂停/停止/语速/定时）、替换规则（开关/重分段/同标题去重/有效规则/规则编辑）、更多配置（页面动画/图片样式/进度条行为/文本菜单展开/章节附加信息/阅读日志）；
- 阅读配置（朗读参数、替换开关、阅读样式与更多设置）已接入“全局配置 + 书籍覆盖”分层持久化，重新进入阅读页可恢复；
- 阅读器已补齐正文编辑弹层：支持标题修改、正文多段编辑、复制全部、重置正文并保存，编辑结果会持久化恢复；
- 长按文本菜单已扩展为完整动作集：复制、分享、书签、朗读、替换、词典、浏览器搜索、章节内搜索；
- 书架支持按最近阅读排序，长按书籍进入详情（贴近 legado 入口习惯）；
- 搜索页支持搜索历史、书架匹配提示、搜索范围（全部/分组/书源）与精准搜索开关。
- 书源页已支持本地管理闭环：新增、编辑、启停、删除、JSON 导入/导出，并联动搜索范围（按书源 URL 定位）。
- 搜索菜单已提供“书源管理/搜索日志”入口，日志支持查看与清空（对齐 legado `menu_log` 语义）。
- 书架支持分组筛选、分组管理（新增/改名/显隐/顺序调整）与分组级排序策略（支持跟随全局）。
- 书架排序已对齐 legado 语义：最近阅读、最新章节、书名、手动顺序、综合时间、作者。

### 与 legado 对齐说明（尚未对齐）

- 搜索日志页、书源管理深度联动；
- 阅读器深层能力仍以本地状态复刻为主，尚未接入真实内容源拉取、规则云端同步与跨设备同步；

## 本地运行

```bash
flutter pub get
flutter run -d ios
```

## 说明

- 当前未接入 API，按钮与列表中的业务动作均为占位实现；
- 项目内不包含许可证文件（按需求已移除）。

## CI 打包

- 工作流文件：`.github/workflows/build-ios.yml`
- 触发方式：`push main` / `pull_request(main)` / 手动触发
- 产物：`Adola-unsigned.ipa`（Artifact + nightly release）
